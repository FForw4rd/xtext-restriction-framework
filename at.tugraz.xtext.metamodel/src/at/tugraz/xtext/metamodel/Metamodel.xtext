grammar at.tugraz.xtext.metamodel.Metamodel with org.eclipse.xtext.common.Terminals

generate metamodel "http://www.tugraz.at/xtext/metamodel/Metamodel"

Domainmodel: 
  (elements += AbstractElement)*
;

AbstractElement:
	Type | Function
;

Type:
	Datatype | Object //| SecureObject
;

RegExType:
	Type | "(optional)" Type | "(repeat)" Type
;

Datatype:
	"datatype" name = ID ("{"
		("defaultvalue=" defaultValue = STRING)? //TODO Will ich das?
		(restrictions += Restriction)*
	"}")?
;

Restriction:
	StringRestriction | ValueRestriction
;

StringRestriction:
	"maxlength" maxlength = INT
	"minlength" minlength = INT
	
;

ValueRestriction:
	"maxvalue" maxvalue = INT
	"minvalue" minvalue = INT
	
;

//SecureObject:
//	"object" name = ID "{"
//		(members += Member)*
//	"}"
//;

Member:
	name = ID ':' type = [Type]
;

Object:
	"object" name = ID ('extends' superType = [Object])? "{"
		(members += Member ( "{"
			restrictions += Restriction
			"}")*
		)*
		(issecure ?= "issecure")?
	"}"
;

Function:
	"function" name = ID ('extends' superType = [Object])? "{"
		"id" identifier = INT //TODO unique pr√ºfen
		(issecure ?= "issecure")?
		("gets" inputs+=[RegExType]* )? 
		("returns" outpust+=[RegExType]* )?
		
	"}"
;